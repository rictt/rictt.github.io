(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{314:function(t,s,a){t.exports=a.p+"assets/img/image-2.39470f37.png"},315:function(t,s,a){t.exports=a.p+"assets/img/image-1.52b338c8.png"},316:function(t,s,a){t.exports=a.p+"assets/img/image-3.da818a27.png"},405:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"手动构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动构建"}},[t._v("#")]),t._v(" 手动构建")]),t._v(" "),s("p",[t._v("在根目录新建deploy.sh，在根目录终端下执行 "),s("code",[t._v("sh deploy.sh")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入生成的文件夹")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果是发布到自定义域名")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'www.example.com' > CNAME")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 因为初始化的分支，可能是main或者master，如果不在后面指定分支的话，而后面push用了自定义分支名称的话，会导致一直push不上去")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" gh-pages\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git push -f git@github.com:rictt/rictt.github.io.git gh-pages")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" git@github.com:rictt/rictt.github.io.git gh-pages\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io/<REPO>")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n\n")])])]),s("h2",{attrs:{id:"自动构建-github-action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动构建-github-action"}},[t._v("#")]),t._v(" 自动构建(github action)")]),t._v(" "),s("h3",{attrs:{id:"关键点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关键点"}},[t._v("#")]),t._v(" 关键点")]),t._v(" "),s("ul",[s("li",[t._v("访问密钥")]),t._v(" "),s("li",[t._v("项目密钥")])]),t._v(" "),s("h3",{attrs:{id:"_1、新建一个仓库-这里跟项目访问方式有关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、新建一个仓库-这里跟项目访问方式有关"}},[t._v("#")]),t._v(" 1、新建一个仓库（这里跟项目访问方式有关）")]),t._v(" "),s("p",[t._v("输入仓库名称，名字没有要求（但会影响你的访问地址）比如，我想直接 "),s("code",[t._v("https://rictt.github.io/")]),t._v(" 访问，那新建仓库的名称就是 "),s("code",[t._v("rictt.github.io")]),t._v(" ；否则，访问的时候需要加上https://rictt.github.io/仓库名称，")]),t._v(" "),s("h3",{attrs:{id:"_2、在项目根目录添加工作流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、在项目根目录添加工作流"}},[t._v("#")]),t._v(" 2、在项目根目录添加工作流")]),t._v(" "),s("p",[s("code",[t._v("ACCESS_TOKEN")]),t._v(" 后面我们会用到，可以用你自定义的名字，后面替换就行")]),t._v(" "),s("p",[s("img",{attrs:{src:a(314),alt:""}})]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("  name: Build and Deploy\n\n  on:\n    push:\n      branches: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n  jobs:\n    build:\n      runs-on: ubuntu-latest\n\n      steps:    \n      - name: Checkout\n        uses: actions/checkout@main\n      \n      - name: vuepress-deploy\n        uses: jenkey2011/vuepress-deploy@v1.8.1\n        env:\n          ACCESS_TOKEN: "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${{ secrets.ACCESS_TOKEN }")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          TARGET_REPO: rictt/rictt.github.io\n          BUILD_SCRIPT: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n          BUILD_DIR: docs/.vuepress/dist/\n          COMMIT_MESSAGE:  Auto deploy by the Vuepress-deploy\n\n")])])]),s("h3",{attrs:{id:"_3、添加accesstoken"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、添加accesstoken"}},[t._v("#")]),t._v(" 3、添加accesstoken")]),t._v(" "),s("p",[t._v("这一步主要是为了action运行时，能够有权限去操作仓库；")]),t._v(" "),s("p",[t._v("生成Personal access tokens后，复制生成后的密钥（一定要复制，因为关闭后就看不到了），然后到我们新建的仓库当中点 "),s("code",[t._v("settings")]),t._v(" 后secrets里面新建一个密钥，名字为我们上次用到的ACCESS_TOKEN，值就是Personal access token生成的字符串复制进去，然后执行action；")]),t._v(" "),s("p",[s("img",{attrs:{src:a(315),alt:"图片"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(316),alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);