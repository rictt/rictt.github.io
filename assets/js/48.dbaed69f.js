(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{400:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[a._v("#")]),a._v(" 核心概念")]),a._v(" "),s("h3",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[a._v("#")]),a._v(" package.json")]),a._v(" "),s("h3",{attrs:{id:"依赖项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖项"}},[a._v("#")]),a._v(" 依赖项")]),a._v(" "),s("ul",[s("li",[a._v("dependencies")]),a._v(" "),s("li",[a._v("devDependencies")])]),a._v(" "),s("h3",{attrs:{id:"版本管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本管理"}},[a._v("#")]),a._v(" 版本管理")]),a._v(" "),s("p",[a._v("npm采用的是"),s("code",[a._v("SemVer规范")]),a._v("进行版本说明。标准版本号由："),s("code",[a._v("X")]),a._v("."),s("code",[a._v("Y")]),a._v("."),s("code",[a._v("Z")]),a._v("的格式，其中XYZ为非0的整数；其中X是主版本号，Y是次版本号，Z是修订号；")]),a._v(" "),s("p",[s("strong",[a._v("主版本号")]),a._v("：特大功能改变，不兼容的API修改等")]),a._v(" "),s("p",[s("strong",[a._v("次版本号")]),a._v("：新功能增加，向下兼容的特性")]),a._v(" "),s("p",[s("strong",[a._v("修订号")]),a._v("：一些兼容的问题修正。")]),a._v(" "),s("h4",{attrs:{id:"一些常见的版本编译信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一些常见的版本编译信息"}},[a._v("#")]),a._v(" 一些常见的版本编译信息")]),a._v(" "),s("ul",[s("li",[a._v("内部版本（alpha)：如1.0.0-alpha.1")]),a._v(" "),s("li",[a._v("公测版本（beta）：如1.0.0-beta.2")]),a._v(" "),s("li",[a._v("正式版本的候选版本（rc：release candiate）：如1.2.0-rc2")])]),a._v(" "),s("h4",{attrs:{id:"依赖项版本标识符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖项版本标识符"}},[a._v("#")]),a._v(" 依赖项版本标识符")]),a._v(" "),s("ul",[s("li",[a._v("固定版本号，不填写任何标识符")]),a._v(" "),s("li",[s("code",[a._v("*")]),a._v("：任意版本(>=0.0.0)")]),a._v(" "),s("li",[s("code",[a._v("16.x")]),a._v("：匹配主要版本（>=16.0.0 <17.0.0)")]),a._v(" "),s("li",[s("code",[a._v("16.3.x")]),a._v("：匹配主次要版本（>=16.3.0 <16.4.0)")]),a._v(" "),s("li",[s("code",[a._v("~5.31.2")]),a._v("：保持主+次版本号不变的前提下，更新最新的修订版本号，比如有5.31.6，下次安装时，则会更新到5.31.6；")]),a._v(" "),s("li",[s("code",[a._v("^6.1.1")]),a._v("：保持主版本不变的前提下，更新最新的次 + 修订版本；")])]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[a._v("  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"signale"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.4.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"figlet"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"react"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"16.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"table"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"~5.4.6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"yargs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^14.0.0"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h3",{attrs:{id:"npm命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm命令"}},[a._v("#")]),a._v(" npm命令")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("npm init "),s("code",[a._v("快速初始化")])])]),a._v(" "),s("li",[s("p",[a._v("npm install "),s("code",[a._v("<package>")]),a._v(" --save  "),s("code",[a._v("将包添加到生产依赖上")])])]),a._v(" "),s("li",[s("p",[a._v("npm install "),s("code",[a._v("<package>")]),a._v(" --save-dev  "),s("code",[a._v("将包添加到本地依赖上")])]),a._v(" "),s("p",[a._v("如果install的时候不指定--save或者--save-dev，那么package会安装到哪呢？22年12月07亲测，会修改package.json，当成dependencies其中一项，并且是^类型;")])]),a._v(" "),s("li",[s("p",[a._v("npm install "),s("code",[a._v("<package>")]),a._v(" --save-exact "),s("code",[a._v("下载指定版本，并指定版本（不加任何标识符）")])])]),a._v(" "),s("li",[s("p",[a._v("npm install "),s("code",[a._v("<package>")]),a._v(" -E "),s("code",[a._v("--save-exact的简写")])])]),a._v(" "),s("li",[s("p",[a._v("npm install --global")])]),a._v(" "),s("li",[s("p",[a._v("npm uninstall "),s("code",[a._v("<package>")]),a._v(" "),s("code",[a._v("卸载包")])])]),a._v(" "),s("li",[s("p",[a._v("npm root -g "),s("code",[a._v("查看全局的包的安装路径")])])]),a._v(" "),s("li",[s("p",[a._v("npm --help "),s("code",[a._v("查看npm帮忙命令")])])]),a._v(" "),s("li",[s("p",[a._v("npm view "),s("code",[a._v("<package>")]),a._v(" version "),s("code",[a._v("查看package的最新版本")])])]),a._v(" "),s("li",[s("p",[a._v("npm view "),s("code",[a._v("<package>")]),a._v(" versions "),s("code",[a._v("查看package的所有版本")])])])]),a._v(" "),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("npm config get "),s("code",[a._v("<config name>")])])]),a._v(" "),s("li",[s("p",[a._v("npm config set "),s("code",[a._v("<config name>")]),a._v(" "),s("code",[a._v("<value>")])]),a._v(" "),s("p",[a._v("比如：设置npm源为淘宝源："),s("code",[a._v("npm config set registry https://registry.npm.taobao.org")])])]),a._v(" "),s("li",[s("p",[a._v("npm config delete "),s("code",[a._v("<config name>")]),a._v(" "),s("code",[a._v("删除配置项")])])])]),a._v(" "),s("h3",{attrs:{id:"lock机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lock机制"}},[a._v("#")]),a._v(" lock机制")]),a._v(" "),s("p",[a._v("前面我们提到可以通过"),s("code",[a._v("npm install jquery -E")]),a._v("来锁定这个依赖的版本，达到统一版本管理；但有新的问题产生："),s("code",[a._v("jquery这个依赖自己内部也有依赖")]),a._v("，可能a、b、c.js等等，而且不是"),s("code",[a._v("-E的方式")]),a._v("，就有可能导致某个小版本升级导致A机器能用，B机器不能用；")]),a._v(" "),s("p",[a._v("按照SemVer规范来讲，每一个npm包的更新都应该遵守版本号对应的含义做到向下兼容，所以按理说我们不应该出现安装了两个不同的补丁版本会影响bug出现。")]),a._v(" "),s("p",[s("code",[a._v("npm5推出了lock机制；")]),a._v("npm install后会自动生成package-lock.json文件，该文件记录了当前这次install所安装的依赖版本号。")]),a._v(" "),s("p",[a._v("也可以理解成为快照：每次install，记录下当前基于package.json的描述及语言下载依赖，并同步到lock.json中；保证下次其他地方其他时间安装的是同一份依赖；")]),a._v(" "),s("ul",[s("li",[a._v("如果package.json存在版本\n"),s("ul",[s("li",[a._v("package-lock.json不存在匹配版本，则更新下载匹配规则内最新的版本")]),a._v(" "),s("li",[a._v("存在匹配版本，则按lock.json中的版本下载")])])])]),a._v(" "),s("h2",{attrs:{id:"实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[a._v("#")]),a._v(" 实践")]),a._v(" "),s("p",[a._v("当在package.json指定axios为^1.0.0的版本下，并且package-lock.json不存在。此时npm install本地会生成一份lock.json，由于我们填写了匹配规则"),s("code",[a._v("^")]),a._v("，于是找到了最新次 + 修订版本axios:1.2.1，写入lock.json并安装")]),a._v(" "),s("p",[a._v("下次其他同事安装，会依照package.json，package-lock.json逐个检查，并更新，减少了因版本问题导致的bug")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"devDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"axios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^1.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// package-lock.json")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"axios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.2.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  ...\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[a._v("#")]),a._v(" 参考链接")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://jiuaidu.com/jianzhan/523526/",target:"_blank",rel:"noopener noreferrer"}},[a._v("锁定"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);