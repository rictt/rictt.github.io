# æµè§ˆå™¨æ’ä»¶å¼€å‘

## ç³»åˆ—(ä¸€)ï¼šhello extension

### å‰è¨€
   
   æ–‡ç« å†…å®¹æ¥æºäºChromeå¼€å‘è€…æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†ä¸ºç¿»è¯‘ï¼ŒåŠ ä¸Šè‡ªå·±çš„ä¸€ç‚¹è¡¥å……æˆ–è€…ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·æ‹…å¾…ï¼Œç³»åˆ—å°†é€šè¿‡æ¯ä¸ªå®æˆ˜ä¾‹å­ï¼Œæ¥åŠ æ·±å¯¹æ’ä»¶å¼€å‘çš„ç†è§£ä¸Šæ‰‹ï¼›
   
ç›®å½•å¯¼èˆª
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸€)ï¼šhello extension](https://juejin.cn/post/7159443319938875428)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´](https://juejin.cn/post/7159443757878755364)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼](https://juejin.cn/post/7159443901193928711)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶](https://juejin.cn/post/7159444710384205832)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†](https://juejin.cn/post/7159445226707222558)
   
### 1ã€æµè§ˆå™¨æ’ä»¶

æ’ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç¨‹åºï¼Œæœ‰å›¾å½¢ç•Œé¢ï¼Œæœ‰åœ¨è¿è¡Œçš„åå°è„šæœ¬ï¼›æ¯å½“æ‰“å¼€æµè§ˆå™¨ï¼Œæ’ä»¶éƒ½åœ¨åå°é»˜é»˜è¿›è¡Œä¸­ï¼Œç„¶ååœ¨æµè§ˆçš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®æµè§ˆå†…å®¹å»åšå¢å¼ºç”¨æˆ·ä½“éªŒçš„æ“ä½œï¼Œè®²ä¸ªæ•…äº‹ï¼šæ¯”å¦‚`å¼ ä¸‰æ¯å¤©éƒ½å–œæ¬¢é€›çŸ¥ä¹ï¼Œå› æ­¤è¢«é¢†å¯¼æ‰¹è¯„äº†å¾ˆå¤šæ¬¡ï¼Œå¼ ä¸‰çœ‹åˆ°é‚£ä¸ªè¶…å¤§çš„çŸ¥ä¹logoå°±å¤´ç–¼ï¼Œæƒ³ç€æ€ä¹ˆçœ‹çŸ¥ä¹çš„åŒæ—¶å±è”½æ‰è¿™ä¸ªlogoä»¥è‡³äºä¸å¤ªæ˜æ˜¾è¢«å‘ç°åœ¨æ‘¸é±¼ã€‚`â€”â€”æ’ä»¶å°±å¯ä»¥ç”¨ä¸Šäº†ï¼Œé’ˆå¯¹åŸŸåzhihu.comï¼Œå±è”½æ‰logoçš„imgå…ƒç´ ï¼Œç¥ä¸çŸ¥é¬¼ä¸è§‰ï½

`æ‰€ä»¥æ’ä»¶å…¶å®å¯ä»¥æ˜¯`
- ç”Ÿäº§å·¥å…·
- æµè§ˆä½“éªŒå¢å¼ºå·¥å…·
- ä¿¡æ¯èšåˆ
- æ‘¸é±¼æ¸¸æˆå°èƒ½æ‰‹

### 2ã€æ’ä»¶æ€ä¹ˆåŠŸèƒ½

####  2.1æ’ä»¶ç•Œé¢
é€šè¿‡ç•Œé¢æ“ä½œçš„æ–¹å¼ï¼Œç®¡ç†æ’ä»¶ï¼›`æ’ä»¶çš„ç•Œé¢ç”±CSS + HTMLç»„æˆ`ï¼Œæ˜¯çš„ï¼Œä½ æ²¡å¬é”™

#### 2.2æ’ä»¶api
è¿™éƒ¨åˆ†æ˜¯chromeæµè§ˆå™¨æä¾›çš„ï¼Œå…è®¸æˆ‘ä»¬æ’ä»¶è®¿é—®æµè§ˆå™¨çš„ä¸€äº›ç‰¹æ€§ï¼šæ¯”å¦‚è·å–æ¿€æ´»ä¸­çš„tabã€ä¿®æ”¹ç½‘ç»œè¯·æ±‚ç­‰ç­‰ï¼›

###  3ã€hello extension
æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼Œä¸‹é¢è·Ÿæˆ‘æ‰‹æŠŠæ‰‹æ¥

#### 3.1ã€å‡†å¤‡å·¥ä½œ
æ‰¾ä¸ª200å¹³å¤§çš„åœ°æ–¹æ–°å»ºä¸ªæ–‡ä»¶å¤¹ï¼š`hello-extension`ï¼Œç„¶ååœ¨æ–‡ä»¶å¤¹é‡Œé¢åˆ†åˆ«åˆ›å»ºmanifest.jsonï¼Œhello.htmlï¼Œç„¶åä¸‹è½½[hello_icon.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d14ee8cd8ef4d58ab6e63e04261e954~tplv-k3u1fbpfcp-watermark.image?)è¿™ä¸ªå›¾ç‰‡ï¼Œå¦å­˜åˆ°æœ¬åœ°ï¼Œåšå¥½å‡†å¤‡ä¸‹é¢å¼€å§‹å†™ä»£ç 

#### 3.2ã€manifest.json
é¦–å…ˆæ˜¯manifest.jsonï¼Œä¸­æ–‡ç¿»è¯‘æˆ‘å–œæ¬¢å«`æ¸…å•æ–‡ä»¶`ï¼Œç”¨æ¥è¯´æ˜ç®¡ç†æ’ä»¶çš„ä¿¡æ¯ï¼Œéœ€è¦ä»€ä¹ˆæƒé™ï¼Œä»€ä¹ˆiconæ˜¾ç¤ºç­‰ç­‰ï¼›å¦å¤–å•°å—¦ä¸€å¥ï¼Œæ’ä»¶å¼€å‘ä¹Ÿæ˜¯æœ‰ç‰ˆæœ¬æ¦‚å¿µçš„ï¼Œæˆ‘ä»¬è¿™é‡Œç»Ÿä¸€ç”¨v3ï¼ˆæœ€æ–°ç‰ˆï¼‰

```json
{
    "name": "Hello Extensions",
    "description": "Base Level Extension",
    "version": "1.0",
    // è¿™é‡Œåˆ‡è®°æ˜¯ç‰ˆæœ¬3
    "manifest_version": 3,
    "action": {
        // default_popupç”¨æ¥æŒ‡å®šç‚¹å‡»iconæ—¶å¼¹çª—çš„htmlå†…å®¹
        "default_popup": "hello.html",
        // icon
        "default_icon": "hello_extensions.png"
    },
    "commands": {
        // å¿«æ·é”®æ‰“å¼€ï¼ŒCtrl+Shift+Få¯ä»¥å¿«é€Ÿæ‰“å¼€æ’ä»¶
        "_execute_action": {
          "suggested_key": {
            "default": "Ctrl+Shift+F",
            "mac": "MacCtrl+Shift+F"
          },
          "description": "Opens hello.html"
        }
      }
}
```

##### 3.3ã€hello.html
è¿™ä¸ªå°±ä¸åºŸè¯äº†ï¼Œå†…å®¹è‡ªå®šä¹‰ï¼Œå°±æ˜¯æˆ‘ä»¬å¼¹çª—çš„å†…å®¹
```html
<html>
  <body>
    <h1>Hello Extensions</h1>
  </body>
</html>
```

##### 3.4ã€å°å°æ€»ç»“ä¸‹
- è®°ä½manifest.jsonæ¸…å•æ–‡ä»¶
- å¼¹çª—çš„å†…å®¹æ˜¯default_popup

### 4ã€å®‰è£…ç„¶åè¿è¡Œ
åœ¨æµè§ˆå™¨ä¸­ç›´æ¥```chrome://extensions```å›è½¦è¿›å…¥æ‰©å±•ç¨‹åºé¢æ¿ï¼Œç„¶ååŠ è½½æˆ‘ä»¬çš„æ–‡ä»¶ç›®å½•ï¼Œé€‰ä¸­æ–‡ä»¶å¤¹å³å¯ï¼Œå†ç‚¹ç¡®è®¤å°±å¯ä»¥äº†ï¼›

å®‰è£…å®Œæˆåï¼Œå°†æ’ä»¶ç½®é¡¶ï¼Œç„¶åç‚¹å‡»æŸ¥çœ‹æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å¿«æ·é”®å¿«é€Ÿæ‰“å¼€ã€‚


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa617d42f1e9437f89f38b7e1c8082e7~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ee8432bb95846cb94ff8a25b3566910~tplv-k3u1fbpfcp-watermark.image?)

### 5ã€æ€»ç»“
æœ¬èŠ‚å†…å®¹æ˜¯æµè§ˆå™¨æ’ä»¶çš„ä¸€ä¸ªåŸºæœ¬äº†è§£ï¼Œåç»­å°†é€šè¿‡å…¶ä»–åœºæ™¯æ¥è¿›ä¸€æ­¥äº†è§£è®¤è¯†æŒæ¡æ’ä»¶å¼€å‘ï¼Œæ¬¢è¿å…³æ³¨æˆ‘ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜ç‹—å­

### ç›¸å…³é“¾æ¥
- [æºç åœ°å€](https://github.com/rictt/chrome-extension/tree/master/reading-time)
- [åŸæ–‡åœ°å€](https://developer.chrome.com/docs/extensions/mv3/getstarted/development-basics/)
- [æ’ä»¶æ–‡æ¡£](https://developer.chrome.com/docs/extensions/)
- [æ’ä»¶æ¦‚å¿µ](https://developer.chrome.com/docs/extensions/mv3/overview/)

## ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´

### å‰è¨€
   
   æ–‡ç« å†…å®¹æ¥æºäºChromeå¼€å‘è€…æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†ä¸ºç¿»è¯‘ï¼ŒåŠ ä¸Šè‡ªå·±çš„ä¸€ç‚¹è¡¥å……æˆ–è€…ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·æ‹…å¾…ï¼Œç³»åˆ—å°†é€šè¿‡æ¯ä¸ªå®æˆ˜ä¾‹å­ï¼Œæ¥åŠ æ·±å¯¹æ’ä»¶å¼€å‘çš„ç†è§£ä¸Šæ‰‹ï¼›

ç›®å½•å¯¼èˆª
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸€)ï¼šhello extension](https://juejin.cn/post/7159443319938875428)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´](https://juejin.cn/post/7159443757878755364)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼](https://juejin.cn/post/7159443901193928711)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶](https://juejin.cn/post/7159444710384205832)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†](https://juejin.cn/post/7159445226707222558)

### 1ã€æ’ä»¶å¼€å‘ç»å¸¸ç”¨åˆ°çš„æ–‡ä»¶
ä¸Šä¸€èŠ‚æˆ‘ä»¬è®¤è¯†äº†`manifest.json, popup.htmlï¼Œ`è¿™ä¸€èŠ‚æˆ‘ä»¬å†æ–°è®¤è¯†ä¸¤ä¸ªå°ä¼™ä¼´ï¼Œé¡ºä¾¿å›é¡¾ä¸‹

- manifest.json

    æˆ‘ä¹ æƒ¯æ€§å«`æ¸…å•é…ç½®æ–‡ä»¶`,æ˜¯æ¯ä¸ªæ’ä»¶å¿…å¤‡çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šå¸¸åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚åœ¨æ–‡ä»¶é‡Œé¢é€šå¸¸å£°æ˜æ’ä»¶çš„åç§°ï¼Œæè¿°ï¼Œiconå›¾æ ‡ï¼Œè¿˜æœ‰æ’ä»¶éœ€è¦ç”¨åˆ°çš„æƒé™ç­‰ç­‰ï¼Œ`æ€»ä¹‹å¾ˆé‡è¦`
    
- service worker: `background.js`

è¿è¡Œåœ¨æ’ä»¶èƒŒåçš„è„šæœ¬ï¼Œæ‰€ä»¥ä¹Ÿä¹ æƒ¯æ€§å‘½åä¸º`background.js`ï¼Œè„šæœ¬ä¼šåœ¨æ’ä»¶æ‰“å¼€æ—¶è¿è¡Œåœ¨åå°ï¼Œç›‘å¬æµè§ˆå™¨çš„å„ç§äº‹ä»¶ï¼Œæ¯”å¦‚tabåˆ‡æ¢äº‹ä»¶ï¼Œå…³é—­tabç­‰ç­‰ï¼›é€šå¸¸æˆ‘ä»¬åœ¨è¿™é‡Œç›‘å¬ç‰¹å®šçš„äº‹ä»¶ï¼Œç„¶åå»å¹²æŸäº›ç‰¹å®šçš„äº‹æƒ…ï¼Œæ¯”å¦‚`ç›‘å¬åˆ°äº†è®¿é—®çŸ¥ä¹ï¼ŒæŠŠçŸ¥ä¹çš„logoå»æ‰`

- `content.js`

æ³¨å…¥åˆ°webé¡µé¢çš„è„šæœ¬ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ’ä»¶å¯èƒ½æ¶‰åŠå¯¹domçš„ä¿®æ”¹ï¼Œå°±éœ€è¦åœ¨é¡µé¢ä¸Šæ³¨å…¥æ–°çš„è„šæœ¬ï¼Œç„¶åä¿®æ”¹æŒ‡å®šçš„domç­‰ç­‰ï¼Œå¸¸è§çš„å»å¹¿å‘Šæ’ä»¶å°±æ˜¯æ‰¾åˆ°å¹¿å‘Šå—domçš„idï¼Œç„¶åå±è”½æ‰ï¼›

- popup.html

æ’ä»¶å¼¹çª—çš„å†…å®¹ï¼Œè¿˜æœ‰options.htmlï¼Œå¬åå­—å°±çŸ¥é“æ˜¯é€‰é¡¹çš„é¡µé¢ï¼Œåé¢æˆ‘ä»¬å†è®²

### 2ã€reading timeå¼€å‘

#### 2.1ã€è¿™ä¸€èŠ‚ä¼šä»‹ç»çš„æ¦‚å¿µ
- icon sizeçš„ä½¿ç”¨
- æ³¨å…¥æˆ‘ä»¬çš„jsåˆ°é¡µé¢ä¸­
- ä½¿ç”¨æ­£åˆ™åŒ¹é…
- å£°æ˜æƒé™

#### 2.2ç¼–å†™ä»£ç 
åˆ›å»ºæ–‡ä»¶å¤¹```reading-time```,åœ¨æ–‡ä»¶å¤¹é‡Œé¢åˆ›å»º`manifest.json`ï¼Œå…¶ä¸­å¿…å¡«çš„æ˜¯`manifset_version, name, version`ï¼›ä¸‹è½½å›¾ç‰‡ç„¶å`ä¿å­˜åœ¨imagesæ–‡ä»¶å½“ä¸­`

[ç‚¹å‡»ä¸‹è½½icon-16.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/400c982c89bd432a90a7cb55543009ed~tplv-k3u1fbpfcp-watermark.image?)

[ç‚¹å‡»ä¸‹è½½icon-32.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/374b92d90e3f44ec8729b8e1845ffde8~tplv-k3u1fbpfcp-watermark.image?)

[ç‚¹å‡»ä¸‹è½½icon-48.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/478a817d29114a6dae4b4487898420a7~tplv-k3u1fbpfcp-watermark.image?)

[ç‚¹å‡»ä¸‹è½½icon-128.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9faf54ad3328406f835417c794743c7c~tplv-k3u1fbpfcp-watermark.image?)
```json
{
  "manifest_version": 3,
  "name": "Reading time",
  "version": "1.0",
  "description": "Add the reading time to Chrome Extension documentation articles",
  "icons": {
    "16": "images/icon-16.png",
    "32": "images/icon-32.png",
    "48": "images/icon-48.png",
    "128": "images/icon-128.png"
  },
  "content_scripts": [
    {
      "js": [
        "scripts/content.js"
      ],
      "matches": [
        "https://www.zhihu.com/question/*/answer/*",
        "https://zhihu.com/question/*/answer/*",
        "https://www.zhihu.com/question/*",
        "https://zhihu.com/question/*"
      ]
    }
  ]
}
```

iconçš„å°ºå¯¸è¯´æ˜ï¼Œæ’ä»¶çš„iconå®˜æ–¹å»ºè®®ä½¿ç”¨`.png`çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ç”¨`.svg`ä¹Ÿæ˜¯æ”¯æŒçš„
| iconå°ºå¯¸ | è¯´æ˜ |
| --- | --- |
| 16*16 | æ‰©å±•é¡µé¢å’Œä¸Šä¸‹æ–‡èœå•å›¾æ ‡ä¸Šçš„Faviconã€‚ |
| 32*32 | Windowsè®¡ç®—æœºé€šå¸¸éœ€è¦æ­¤å°ºå¯¸ã€‚ |
| 48*48 | æ‰©å±•é¡µé¢ä¸Šæ˜¾ç¤º |
| 128*128 | åœ¨å®‰è£…å’ŒChromeç½‘ç»œå•†åº—ä¸­æ˜¾ç¤ºã€‚ |

`content_scripts`ä¸­çš„`matches`æ˜¯æŒ‡æµè§ˆå™¨é¡µé¢å½“åŒ¹é…åˆ°æŒ‡å®šçš„åœ°å€æ—¶ï¼Œ`æ‰æ³¨å…¥æˆ‘ä»¬çš„è„šæœ¬scripts/content.js`ï¼Œmatchesçš„æ ¼å¼æ˜¯`<scheme>://<host><path>`ï¼Œå¯ä»¥åŒ…å«*æ¥åŒ¹é…æŒ‡å®šåœ°å€ä¸‹çš„æ‰€æœ‰åœ°å€ï¼Œæ¯”å¦‚`https://zhihu.com/question/*/answer/*`ï¼Œåˆ™å¯ä»¥åŒ¹é…åˆ°`https://zhihu.com/question/1234/answer/456`

åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„é¡¹ç›®åŸºæœ¬å·¥ä½œæ­å»ºå®Œæˆï¼Œç›®å½•åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­
```md
â”œâ”€â”€ images
â”‚Â Â  â”œâ”€â”€ icon-128.png
â”‚Â Â  â”œâ”€â”€ icon-16.png
â”‚Â Â  â”œâ”€â”€ icon-32.png
â”‚Â Â  â””â”€â”€ icon-48.png
â”œâ”€â”€ manifest.json
â””â”€â”€ scripts
    â””â”€â”€ content.js
```

#### 2.3ç¨‹åºä¸»é€»è¾‘content.js

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çŸ¥ä¹ä½œä¸ºæµ‹è¯•ï¼Œè®¡ç®—å‡ºæ¯ç¯‡æ–‡ç« å¤§çº¦éœ€è¦èŠ±è´¹å¤šå°‘æ—¶é—´ï¼Œä¸‹é¢æ˜¯ä»£ç å’Œå®é™…æ•ˆæœ

```js
const answers = [...document.querySelectorAll('.RichContent-inner')]

if (answers && answers.length) {
  answers.forEach(answer => {
    // è·å–å›ç­”çš„å†…å®¹é•¿åº¦
    const textLength = answer.innerText.length
    // 200ä¸ªå­—å¤§çº¦1åˆ†é’Ÿ
    const readingTime = Math.round(textLength / 200) || 1
    const badge = document.createElement('p')
    // badge.classList.add("color-secondary-text", "type--caption");
    badge.style.color = '#3c4043'
    badge.textContent = `â±ï¸ å¤§çº¦éœ€${readingTime}åˆ†é’Ÿè¯»å®Œ`;
    // æ’å…¥åˆ°å›ç­”å‰é¢æ˜¾ç¤º
    answer.insertBefore(badge, answer.children[0])
  })
}
```

### 3ã€å®‰è£…è¿è¡Œ

åœ¨æµè§ˆå™¨ä¸­ç›´æ¥```chrome://extensions```å›è½¦è¿›å…¥æ‰©å±•ç¨‹åºé¢æ¿ï¼Œç„¶ååŠ è½½æˆ‘ä»¬çš„æ–‡ä»¶ç›®å½•ï¼Œé€‰ä¸­æ–‡ä»¶å¤¹å³å¯ï¼Œå†ç‚¹ç¡®è®¤å°±å¯ä»¥äº†ï¼›

å®‰è£…å®Œæˆåï¼Œå°†æ’ä»¶ç½®é¡¶ï¼Œç„¶åç‚¹å‡»æŸ¥çœ‹æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å¿«æ·é”®å¿«é€Ÿæ‰“å¼€ã€‚


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75482461a545475d8e7c805e904141bf~tplv-k3u1fbpfcp-watermark.image?)

å°è¯•è®¿é—®çŸ¥ä¹ï¼šhttps://www.zhihu.com/question/516703724

### 4ã€è¿è¡Œæ•ˆæœ


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3934dd41b55f4092ad1d2f34d1394667~tplv-k3u1fbpfcp-watermark.image?)


### 5ã€æ€»ç»“

æœ¬èŠ‚å†…å®¹æ˜¯æµè§ˆå™¨æ’ä»¶çš„è¿›ä¸€æ­¥äº†è§£ï¼Œä¸»è¦è®¤è¯†äº†content.jsï¼Œå’Œåœ¨æŒ‡å®šåŸŸåä¸‹æ³¨å…¥æˆ‘ä»¬çš„è„šæœ¬ï¼Œå®ç°æ’ä»¶çš„åŠŸèƒ½ï¼›å†æ¥å›é¡¾ä¸€ä¸‹`manifest.json, content.js`

### ç›¸å…³é“¾æ¥
- [æºç åœ°å€](https://github.com/rictt/chrome-extension/tree/master/reading-time)
- [åŸæ–‡åœ°å€](https://developer.chrome.com/docs/extensions/mv3/getstarted/tut-reading-time/)
- [æ’ä»¶æ–‡æ¡£](https://developer.chrome.com/docs/extensions/)
- [æ’ä»¶æ¦‚å¿µ](https://developer.chrome.com/docs/extensions/mv3/overview/)

## ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼

### å‰è¨€
   
   æ–‡ç« å†…å®¹æ¥æºäºChromeå¼€å‘è€…æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†ä¸ºç¿»è¯‘ï¼ŒåŠ ä¸Šè‡ªå·±çš„ä¸€ç‚¹è¡¥å……æˆ–è€…ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·æ‹…å¾…ï¼Œç³»åˆ—å°†é€šè¿‡æ¯ä¸ªå®æˆ˜ä¾‹å­ï¼Œæ¥åŠ æ·±å¯¹æ’ä»¶å¼€å‘çš„ç†è§£ä¸Šæ‰‹ï¼›

ç›®å½•å¯¼èˆª
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸€)ï¼šhello extension](https://juejin.cn/post/7159443319938875428)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´](https://juejin.cn/post/7159443757878755364)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼](https://juejin.cn/post/7159443901193928711)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶](https://juejin.cn/post/7159444710384205832)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†](https://juejin.cn/post/7159445226707222558)

### 1ã€ä»‹ç»

è¿™ä¸€èŠ‚å¼€å‘çš„æ’ä»¶å†…å®¹ï¼Œé™¤äº†åŸºæœ¬çš„ç›®å½•ç»“æ„ï¼Œè¿˜ä¼šå¯¹éƒ¨åˆ†chrome apiè¿›è¡Œä»‹ç»ï¼›ä¸»è¦æ˜¯é€šè¿‡å¼€å‘ä¸€ä¸ªé’ˆå¯¹çŸ¥ä¹é˜…è¯»çš„`ä¸“æ³¨æ¨¡å¼`æ¥è¿›è¡Œç†Ÿæ‚‰ï¼Œ`æ‰€è°“ä¸“æ³¨æ¨¡å¼ï¼š`å»é™¤æ‰é¡µé¢ä¸Šçš„å¹¿å‘Šï¼Œå¤šä½™ä¸å¿…è¦çš„ä¿¡æ¯ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿçº¯ç²¹è¿›è¡Œé˜…è¯»æ–‡ç« ã€è¯„è®ºï¼›éœ€æ±‚å‡ºæ¥äº†ï¼Œæˆ‘ä»¬ä»æŠ€æœ¯çš„è§’åº¦æ€è€ƒæ€ä¹ˆåšå‘¢

`ç­”æ¡ˆæ˜¯ï¼š`ç”¨cssæ ·å¼éšè—æ‰å¹¿å‘Šå…ƒç´ ï¼Œé€šè¿‡ç›‘å¬å½“å‰ç‚¹å‡»çš„tabæ˜¯ä¸æ˜¯çŸ¥ä¹ï¼Œå¦‚æœæ˜¯ï¼ŒåŠ å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„cssæ ·å¼æ–‡ä»¶ï¼Œå¦åˆ™ä¸åšå¤„ç†ã€‚

### 2ã€æ–°å»ºæˆ‘ä»¬çš„å·¥ä½œæ–‡ä»¶å¤¹

- æ–°å»º`fouce-mode`æ–‡ä»¶å¤¹

[icon-16.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ee26a1709954574a6b1d151913c326e~tplv-k3u1fbpfcp-watermark.image?)

[icon-32.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2837dbc93e544d67a68355ba3ddd7157~tplv-k3u1fbpfcp-watermark.image?)

[icon-48.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/828dcf7ef9004249aae1e7314817ae2f~tplv-k3u1fbpfcp-watermark.image?)

[icon-128.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6af66c941e5d45eab6652eb242504a10~tplv-k3u1fbpfcp-watermark.image?)

- ä¸‹è½½ä¸‹é¢çš„iconå›¾ç‰‡ï¼Œ`ä¿å­˜åˆ°imagesæ–‡ä»¶å¤¹å½“ä¸­`
- åˆ›å»º`manifest.json`æ¸…å•æ–‡ä»¶
- åˆ›å»º`background.js`åå°è¿è¡Œè„šæœ¬æ–‡ä»¶
- åˆ›å»º`focus-mode.css`æ ·å¼æ–‡ä»¶è¡¨

å…ˆåˆ›å»ºå¥½å¯¹åº”çš„æ–‡ä»¶ç»“æ„åï¼Œä¸‹é¢æˆ‘ä»¬ä¾æ¬¡å¾€é‡Œé¢å¡«ä»£ç ï¼Œå¹¶è¯´æ˜å¯¹åº”çš„ä½œç”¨ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹

```
focus-mode
â”œâ”€â”€ background.js
â”œâ”€â”€ focus-mode.css
â”œâ”€â”€ images
â”‚Â Â  â”œâ”€â”€ icon-128.png
â”‚Â Â  â”œâ”€â”€ icon-16.png
â”‚Â Â  â”œâ”€â”€ icon-32.png
â”‚Â Â  â””â”€â”€ icon-48.png
â””â”€â”€ manifest.json
```

### 3ã€ä¾æ¬¡å†™å…¥å¯¹åº”å†…å®¹

#### 3.1 `manifest.json`
ç»†å¿ƒçš„åŒå­¦å‘ç°é™¤äº†å¸¸è§nameï¼Œversionï¼Œè¿™æ¬¡æˆ‘ä»¬å‘ç°äº†æ–°çš„é¢å­”`background`å’Œ`permissions`ï¼›

å…¶ä¸­`background.service_worker`å¯ä»¥ç†è§£ä¸ºæ’ä»¶ç¨‹åºè¿è¡Œæ—¶èƒŒåä¸æ–­è¿è¡ŒæœåŠ¡å™¨/è„šæœ¬ï¼Œç›‘å¬ç€chromeæµè§ˆå™¨å‘ç”Ÿçš„å˜åŒ–ï¼Œåœ¨è„šæœ¬é‡Œé¢æ ¹æ®å˜åŒ–ï¼Œåšä¸åŒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚å½“é¼ æ ‡åˆ‡æ¢tabæ ï¼Œè„šæœ¬å¯¹ç½‘é¡µæ¤å…¥ä¸åŒçš„è„šæœ¬ç­‰ç­‰ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šå†™ã€‚

`permissions`ä¸»è¦æ˜¯å‘chromeå£°æ˜ï¼Œæˆ‘è¿™ä¸ªæ’ä»¶éœ€è¦ä»€ä¹ˆæƒé™ï¼Œæ¯”å¦‚æˆ‘è¦è®¿é—®å½“å‰æ´»è·ƒï¼ˆå½“å‰æ˜¾ç¤ºï¼‰çš„tabï¼Œé‚£å°±éœ€è¦åœ¨permissionå‘chromeç”³è¯·`activeTab`è¿™ä¸ªæƒé™ï¼Œå½“è¿è¡Œæ’ä»¶æ—¶ï¼Œæ‰èƒ½ç›‘å¬`activeTab`äº‹ä»¶

ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°äº†ï¼Œ`actionè®¾ç½®çš„default_iconå’Œiconsæ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿ`ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿèƒ½å¤Ÿä½¿ç”¨`chrome.action`APIï¼Œæ‰è®¾ç½®çš„ï¼›å®˜æ–¹æ–‡æ¡£è¯´æ˜äº†åªæœ‰è®¾ç½®äº†actionè¡Œä¸ºçš„iconï¼Œæ‰ä¼šå“åº”iconçš„ç‚¹å‡»äº‹ä»¶ï¼Œåšä¸åŒçš„äº‹æƒ…ã€‚

```json
{
  "manifest_version": 3,
  "name": "Focus Mode",
  "description": "Enable reading mode on Chrome's official Extensions and Chrome Web Store documentation.",
  "version": "1.0",
  "icons": {
    "16": "images/icon-16.png",
    "32": "images/icon-32.png",
    "48": "images/icon-48.png",
    "128": "images/icon-128.png"
  },
  "background": {
    "service_worker": "background.js"
  },
  "action": {
    "default_icon": {
      "16": "images/icon-16.png",
      "32": "images/icon-32.png",
      "48": "images/icon-48.png",
      "128": "images/icon-128.png"
    }
  },
  // ç”³è¯·activeTabã€scriptingæƒé™
  "permissions": [
    "activeTab",
    "scripting"
  ],
  "commands": {
    // å¿«æ·é”®ä½¿ç”¨æ’ä»¶
    "_execute_action": {
      "suggested_key": {
        "default": "Ctrl+U",
        "mac": "Command+U"
      }
    }
  }
}
```
#### 3.2 `background.js`åå°è¿è¡Œè„šæœ¬

ç”±äºæˆ‘ä»¬çš„background.jsæ˜¯æœ‰chromeæ³¨å…¥åˆ°é¡µé¢å½“ä¸­çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨chromeä¸­æä¾›çš„apiï¼Œå¦‚ä¸‹é¢çš„`chrome.runtime.onInstalled`, `chrome.action.onClicked.addListener`ç­‰ç­‰ï¼›

`chrome.runtime.onInstalled`ï¼šå½“æ’ä»¶ã€æµè§ˆå™¨å‘ç”Ÿå®‰è£…æ—¶æˆ–è€…æ›´æ–°æ—¶æ‰§è¡Œçš„ä¸€ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬åœ¨`background.js`ä¸­ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå½“æµè§ˆå™¨æ’ä»¶æ‰§è¡Œæˆ‘ä»¬çš„äº‹æƒ…ï¼šè®¾ç½®æ’ä»¶å·¥å…·æ iconå›¾æ ‡çš„å‰¯æ ‡é¢˜ä¸º"OFF"ï¼Œå¦‚ä¸‹


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66e12564a46643bd9be32374f53c61ee~tplv-k3u1fbpfcp-watermark.image?)

`chrome.action.onClicked.addListener`ï¼šåªæœ‰å½“å‰é¢æˆ‘ä»¬è®¾ç½®äº†actionä¸‹çš„default_iconï¼Œæ‰ä¼šç”Ÿæ•ˆï¼›å½“æˆ‘ä»¬ç‚¹å‡»å³ä¸Šè§’å·¥å…·æ çš„æ’ä»¶iconæ—¶ï¼Œåˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦ä¸ºçŸ¥ä¹ï¼Œè®¾ç½®å‰¯æ ‡é¢˜ONæˆ–è€…OFFï¼Œæ˜¯çš„è¯å¼€å¯/å…³é—­ä¸“æ³¨æ¨¡å¼ï¼›


![QQ20221026-212723-HD.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdf6e8c10c8643d089e56881891c80c1~tplv-k3u1fbpfcp-watermark.image?)

```js
const STATE = {
  ON: "ON",
  OFF: "OFF"
}

chrome.runtime.onInstalled.addListener(() => {
  chrome.action.setBadgeText({
    text: STATE.OFF,
  });
});

chrome.action.onClicked.addListener(async (tab) => {
  // å›è°ƒä¼šè¿”å›ä¸€ä¸ªtabï¼ŒtabåŒ…å«å¸¸è§çš„idï¼Œindexï¼Œurlç­‰
  if (tab.url.indexOf('zhihu') > -1) {
    // è·å–å½“å‰tabé¡µçš„çŠ¶æ€ï¼Œæ˜¯ONè¿˜æ˜¯OFF
    const prevState = await chrome.action.getBadgeText({ tabId: tab.id });
    // å¦‚æœå½“å‰ä¸ºONï¼Œåˆ™ç‚¹å‡»åº”è¯¥ä¸ºOFFï¼Œå…³é—­ä¸“æ³¨æ¨¡å¼
    const nextState = prevState === STATE.ON ? STATE.OFF : STATE.ON
    // è®¾ç½®ä¸‹æ ‡æ–‡æœ¬
    await chrome.action.setBadgeText({
      tabId: tab.id,
      text: nextState,
    });

    if (nextState === STATE.ON) {
      // æ’å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„csså½¢æˆä¸“æ³¨æ¨¡å¼
      await chrome.scripting.insertCSS({
        files: ["focus-mode.css"],
        target: { tabId: tab.id },
      });
    } else if (nextState === STATE.OFF) {
      // å¦åˆ™çš„è¯ç§»é™¤
      await chrome.scripting.removeCSS({
        files: ["focus-mode.css"],
        target: { tabId: tab.id },
      });
    }
  }
});
```

#### 3.3 è®¾ç½®çŸ¥ä¹çš„ä¸“æ³¨æ¨¡å¼
æ‰€è°“ä¸“æ³¨æ¨¡å¼ï¼ˆç²—ç³™ç‰ˆï¼‰ï¼šä¸å½±å“é˜…è¯»ï¼Œå»æ‰å¹¿å‘Šï¼Œä¸“æ³¨äºæ–‡å­—å†…å®¹æœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆåˆ†æé¡µé¢ä¸Šå“ªå—åŒºåŸŸæ˜¯å¯ä»¥å¹²æ‰å±è”½æ‰ï¼Œé’ˆå¯¹æ€§æ‰¾åˆ°å…ƒç´ idæˆ–è€…classè¦†ç›–æ‰ï¼›å¦‚ä¸‹


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d789379f83864d5090fbe00ced193813~tplv-k3u1fbpfcp-watermark.image?)



![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/272a8263290e4eec9dee6306a6b7ec69~tplv-k3u1fbpfcp-watermark.image?)

äºæ˜¯æˆ‘ä»¬çš„csså¯ä»¥è¿™æ ·å†™ï¼ŒåŠ importantæ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„æ ·å¼æœ€é«˜çº§ï¼›å¹³æ—¶å¼€å‘ä¸å»ºè®®è¿™æ ·å†™

```css
.Question-sideColumn,
.AppHeader-inner {
  display: none !important;
}

.Question-mainColumn {
  width: auto !important;
}

```

æ•ˆæœå°±å˜æˆäº†å¦‚ä¸‹


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0917fdaffc64ff3b9ed7b411ffc981b~tplv-k3u1fbpfcp-watermark.image?)

### 4ã€æ€»ç»“

è¿™æœŸæˆ‘ä»¬ä¸»è¦é’ˆå¯¹çŸ¥ä¹åšäº†ä¸€ä¸ªä¸“æ³¨æ¨¡å¼ï¼Œè®©æˆ‘ä»¬æ›´ä¸“å¿ƒçš„æ‘¸é±¼å­¦ä¹ ï¼Œä¸ä¼šè¢«å‘ç°çš„å¤ªæ˜æ˜¾ï¼›ä¸»è¦é€»è¾‘éƒ½æ˜¯åœ¨`background.js`é‡Œé¢ï¼Œé€šè¿‡ç›‘å¬iconçš„ç‚¹å‡»äº‹ä»¶ï¼Œå®æ—¶è·å–å½“å‰tabçš„urlï¼Œåˆ¤æ–­æ˜¯å¦çŸ¥ä¹ï¼Œæ³¨å…¥æˆ‘ä»¬çš„cssï¼Œå®ç°ä¸“æ³¨æ¨¡å¼ã€‚

### ç›¸å…³é“¾æ¥
- [æºç åœ°å€](https://github.com/rictt/chrome-extension/tree/master/focus-mode)
- [åŸæ–‡åœ°å€](https://developer.chrome.com/docs/extensions/mv3/getstarted/tut-focus-mode/)
- [v3 manifestæ¸…å•é…ç½®](https://developer.chrome.com/docs/extensions/mv3/manifest/)
- [tabä¿¡æ¯](https://developer.chrome.com/docs/extensions/reference/tabs/#type-Tab)
- [chrome.action](https://developer.chrome.com/docs/extensions/reference/action/#badge)
- [chrome.runtime](https://developer.chrome.com/docs/extensions/reference/runtime/)
- [æ’ä»¶æ–‡æ¡£](https://developer.chrome.com/docs/extensions/)
- [æ’ä»¶æ¦‚å¿µ](https://developer.chrome.com/docs/extensions/mv3/overview/)

## ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶
### å‰è¨€
   
   æ–‡ç« å†…å®¹æ¥æºäºChromeå¼€å‘è€…æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†ä¸ºç¿»è¯‘ï¼ŒåŠ ä¸Šè‡ªå·±çš„ä¸€ç‚¹è¡¥å……æˆ–è€…ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·æ‹…å¾…ï¼Œç³»åˆ—å°†é€šè¿‡æ¯ä¸ªå®æˆ˜ä¾‹å­ï¼Œæ¥åŠ æ·±å¯¹æ’ä»¶å¼€å‘çš„ç†è§£ä¸Šæ‰‹ï¼›

ç›®å½•å¯¼èˆª
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸€)ï¼šhello extension](https://juejin.cn/post/7159443319938875428)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´](https://juejin.cn/post/7159443757878755364)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼](https://juejin.cn/post/7159443901193928711)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶](https://juejin.cn/post/7159444710384205832)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†](https://juejin.cn/post/7159445226707222558)

### 1ã€äº†è§£æ’ä»¶çš„è°ƒè¯•

æ‰€è°“å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼›å¼€å‘å†™ä»£ç å¾ˆé‡è¦ï¼Œå¦‚ä½•è°ƒè¯•æˆ‘ä»¬çš„ä»£ç æ›´é‡è¦ï¼Œä¸ä¼šè°ƒè¯•çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿æˆ‘ä»¬çš„ç¼–ç æ•ˆç‡äº‹å€åŠŸåŠã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬ä¸»è¦æ¥`ä»‹ç»æˆ‘ä»¬è‡ªå·±çš„chromeæ’ä»¶å¦‚ä½•è°ƒè¯•ï¼Œå¦‚ä½•debuggeræ‰“æ–­ç‚¹`ï¼›

### 2ã€å‡†å¤‡å·¥ä½œ

å› ä¸ºè¦è°ƒè¯•ä»£ç ï¼Œæ‰€ä»¥è¦å…ˆå‡†å¤‡å¥½æˆ‘ä»¬çš„ä»£ç ï¼›æ‰¾ä¸ªåœ°æ–¹æ–°å»ºç›®å½•`debugger-demo`ï¼Œç„¶ååˆ›å»ºæˆ‘ä»¬çš„æ–‡ä»¶

- manifest.json
- backgroung.js
- script/content.js
- popup/popup.html
- popup/popup.js
- images/...ä¸èµ˜è¿°äº†

æœ€åæˆ‘ä»¬çš„ç›®å½•ç»“æ„å¦‚ä¸‹
```
debugger-demo
â”œâ”€â”€ background.js
â”œâ”€â”€ images
â”‚   â”œâ”€â”€ icon-128.png
â”‚   â”œâ”€â”€ icon-16.png
â”‚   â”œâ”€â”€ icon-32.png
â”‚   â””â”€â”€ icon-48.png
â”œâ”€â”€ manifest.json
â”œâ”€â”€ popup
â”‚   â”œâ”€â”€ popup.html
â”‚   â””â”€â”€ popup.js
â””â”€â”€ scripts
    â””â”€â”€ content.js
```

å¯¹åº”æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹

`manifest.json`å†…å®¹å¦‚ä¸‹ï¼š
```
{
  "manifest_version": 3,
  "name": "Debugger demo",
  "version": "1.0",
  "description": "Debugger chrome Extension demo!",
  "icons": {
    "16": "images/icon-16.png",
    "32": "images/icon-32.png",
    "48": "images/icon-48.png",
    "128": "images/icon-128.png"
  },
  "action": {
    "default_popup": "./popup/popup.html",
    "default_icon": {
      "16": "/images/icon-16.png",
      "32": "/images/icon-32.png",
      "48": "/images/icon-48.png",
      "128": "/images/icon-128.png"
    },
    "default_title": "æ‚¬æµ®æ ‡é¢˜"
  },
  "background": {
    "service_worker": "background.js"
  },
  "content_scripts": [
    {
      "js": [
        "scripts/content.js"
      ],
      "matches": [
        "https://*/*"
      ]
    }
  ]
}
```

`content.js`å†…å®¹å¦‚ä¸‹ï¼š
```js
console.log('Im running in content.js')
```

`background.js`å†…å®¹å¦‚ä¸‹ï¼š
```js
console.log('Im running in background.js')
```

`popup/popup.js`å†…å®¹å¦‚ä¸‹ï¼š
```js
console.log('Im running in popup.js')
```

`popup/popup.html`å†…å®¹å¦‚ä¸‹ï¼š
```html
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
</head>

<body>
  <h3 style="width: 300px">ä¸“é—¨ç”¨æ¥debuugerçš„popupï¼Œè¿™é‡Œæ³¨å…¥äº†popup.js</h3>
  // è®°å¾—æ³¨å…¥popup.js
  <script src="popup.js"></script>
</body>

</html>
```

### 3ã€å®‰è£…æˆ‘ä»¬çš„æ’ä»¶

åœ¨æµè§ˆå™¨ä¸­ç›´æ¥```chrome://extensions```å›è½¦è¿›å…¥æ‰©å±•ç¨‹åºé¢æ¿ï¼Œç„¶ååŠ è½½æˆ‘ä»¬çš„æ–‡ä»¶ç›®å½•ï¼Œé€‰ä¸­æ–‡ä»¶å¤¹å³å¯ï¼Œå†ç‚¹ç¡®è®¤å°±å¯ä»¥äº†ï¼›

å®‰è£…å®Œæˆåï¼Œå°†æ’ä»¶ç½®é¡¶ï¼Œç„¶åç‚¹å‡»æŸ¥çœ‹æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å¿«æ·é”®å¿«é€Ÿæ‰“å¼€ã€‚


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa617d42f1e9437f89f38b7e1c8082e7~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/793eb6eb81b24e6a80fceb24073c50e5~tplv-k3u1fbpfcp-watermark.image?)

### 4ã€æ‰“å¼€è°ƒè¯•é¢æ¿

`é¦–å…ˆæ˜¯content.js`ï¼Œå› ä¸ºè¿™éƒ¨åˆ†çš„ä»£ç æ˜¯åœ¨manifest.jsonå£°æ˜çš„ï¼Œå½“è®¿é—®çš„é¡µé¢åœ°å€åŒ¹é…æˆ‘ä»¬å†™çš„æ­£åˆ™æ—¶ï¼Œæ‰ä¼šè¿›è¡Œæ³¨å…¥ï¼Œæ¯”å¦‚æˆ‘ä»¬å†™çš„`matches`æ˜¯`https://*/*`ï¼Œå³åªè¦æ˜¯httpsåŸŸåå°±ä¼šæ‰§è¡Œæˆ‘ä»¬çš„è„šæœ¬ï¼›

æ‰€ä»¥è¿™éƒ¨åˆ†çš„è°ƒè¯•ï¼Œéœ€è¦æˆ‘ä»¬åœ¨é¡µé¢ä¸­æ‰“å¼€æ§åˆ¶é¢æ¿(å³é”®æ£€æŸ¥æˆ–è€…F12å¿«æ·é”®)ï¼Œæ­¥éª¤æ˜¯ï¼š

- æ‰¾ä¸€ä¸ªhttpsçš„åœ°å€
- æ‰“å¼€æ§åˆ¶å°ï¼Œæ‰¾åˆ°sourcesä¸‹çš„content scripts
- æ‰¾åˆ°æˆ‘ä»¬æ’ä»¶çš„åç§°Debuuger Demo
- å…¶ä¸­çš„content.jså°±æ˜¯äº†

å¯ä»¥çœ‹åˆ°æ˜¾ç¤ºäº†æˆ‘ä»¬çš„æºä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ’å…¥æ–­ç‚¹

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60fad29aa3a1456791eda42939bc6792~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79fa928aa19143d3a8b8523f6b16997c~tplv-k3u1fbpfcp-watermark.image?)

`å…¶æ¬¡æ˜¯background.js`ï¼Œæˆ‘ä»¬å›åˆ°å®‰è£…æ’ä»¶çš„é¡µé¢ï¼ˆåœ¨åœ°å€æ è¾“å…¥`chrome://extensions`ï¼‰

- æ‰¾åˆ°æˆ‘ä»¬çš„æ’ä»¶
- ç‚¹å‡»æŸ¥çœ‹è§†å›¾`service worker`
- ä¼šå¼¹å‡ºä¸€ä¸ªæ§åˆ¶å°é¢æ¿
- å¯ä»¥çœ‹åˆ°é¢æ¿è¾“å‡ºäº†æˆ‘ä»¬çš„logè¯­å¥
- åŒæ ·åˆ‡æ¢åˆ°sourcesä¸‹ï¼Œå¯ä»¥æ‰¾åˆ°background.jsè¿›è¡Œæ–­ç‚¹


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c59457ceb2a0442885ada7f5d5f2fe4e~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d472136507f440ab2b007712d7e9d5a~tplv-k3u1fbpfcp-watermark.image?)

---

`æœ€åæ˜¯popup.js`ï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯å±äºå¼¹çª—å±•ç¤ºçš„jsï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å¼¹çª—ä¸Šé¢å³é”®ï¼Œç‚¹å‡»å®¡æŸ¥å¼¹å‡ºå†…å®¹ï¼›ç‚¹å‡»ååŒæ ·æ˜¯ä¸€ä¸ªè°ƒè¯•é¢æ¿ï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„popup.jsä¸­çš„logï¼ŒåŒæ ·å¯ä»¥è°ƒè¯•debuggeræºç ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2575e238e4a428894b9c13a6aa25b69~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7f9358132614520aa9e73d2635f58c8~tplv-k3u1fbpfcp-watermark.image?)

### 5ã€æ€»ç»“

chromeæ’ä»¶çš„è°ƒè¯•çš„å‡ ç§æ–¹é¢ï¼Œå…¶å®éƒ½è·Ÿæˆ‘ä»¬å¹³å¸¸é¡µé¢å¼€å‘ç±»ä¼¼ï¼Œæœ‰ä¸€ä¸ªè°ƒè¯•é¢æ¿ï¼Œå…³é”®æ˜¯ä¸åŒçš„jsæ–‡ä»¶éœ€è¦ä¸åŒçš„æ‰“å¼€æ–¹å¼ï¼Œæ‰“å¼€ä¹‹åæŸ¥çœ‹logï¼Œæ’å…¥æ–­ç‚¹éƒ½æ˜¯ä¸€è‡´çš„ï¼›å­¦ä¼šè°ƒè¯•åï¼Œå¼€å‘æ•ˆç‡æ—¥ç›Šé£é€Ÿå¢é•¿å•¦ï½å–œæ¬¢çš„è¯ç‚¹ä¸ªèµå§

## ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†

### å‰è¨€
   
   æ–‡ç« å†…å®¹æ¥æºäºChromeå¼€å‘è€…æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†ä¸ºç¿»è¯‘ï¼ŒåŠ ä¸Šè‡ªå·±çš„ä¸€ç‚¹è¡¥å……æˆ–è€…ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·æ‹…å¾…ï¼Œç³»åˆ—å°†é€šè¿‡æ¯ä¸ªå®æˆ˜ä¾‹å­ï¼Œæ¥åŠ æ·±å¯¹æ’ä»¶å¼€å‘çš„ç†è§£ä¸Šæ‰‹ï¼›

ç›®å½•å¯¼èˆª
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸€)ï¼šhello extension](https://juejin.cn/post/7159443319938875428)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äºŒ)ï¼šreading timeè®¡ç®—é˜…è¯»æ—¶é—´](https://juejin.cn/post/7159443757878755364)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(ä¸‰)ï¼šfocus modeä¸“æ³¨æ¨¡å¼](https://juejin.cn/post/7159443901193928711)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(å››)ï¼šè°ƒè¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶](https://juejin.cn/post/7159444710384205832)
- [chromeæµè§ˆå™¨å¼€å‘ç³»åˆ—(äº”)ï¼štabsæ ‡ç­¾ç®¡ç†](https://juejin.cn/post/7159445226707222558)


### 1ã€ä»‹ç»
è¿™æ¬¡æˆ‘ä»¬å°†è¦å¼€å‘çš„æ’ä»¶æ˜¯ï¼šå°†tabsæ ‡ç­¾é¡µè¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œå±•å¼€/æŠ˜å ï¼Œå¯¹æ ‡ç­¾æ çš„æ ‡ç­¾è¿›è¡Œæ”¶çº³ï¼›ä¼šå­¦åˆ°çš„æ˜¯ä½¿ç”¨

- host_permissionsæƒé™ç”³è¯·
- tabGroups APIä½¿ç”¨
- tabs APIä½¿ç”¨

åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ä¸‹é¢è¿›å…¥å‰æœŸå‡†å¤‡

### 2ã€é¡¹ç›®å‡†å¤‡
è€è§„çŸ©ï¼Œæ–°å»ºæˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹`tabs-manager`ï¼Œåˆ›å»º`manifest.json`, `popup.css`, `popup.html`, `popup.js`ï¼Œè¿˜æœ‰`images`æ–‡ä»¶å¤¹ï¼›ä¸‹é¢æ˜¯å¯¹åº”çš„iconå›¾ç‰‡ä¸‹è½½

[icon-16.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa0ef3304ee04be78c2188afe63da956~tplv-k3u1fbpfcp-watermark.image?)

[icon-32.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96deb6c0c1bc448d80accc1c035f7ce1~tplv-k3u1fbpfcp-watermark.image?)

[icon-48.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9caa67a69e0144ef9b7e3e5e492609c0~tplv-k3u1fbpfcp-watermark.image?)

[icon-128.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba882a227ca941f6b9d7c938c33093a0~tplv-k3u1fbpfcp-watermark.image?)

`æœ€åæˆ‘ä»¬çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š`ï¼Œæ²¡é—®é¢˜åæˆ‘ä»¬ç»§ç»­å¼€è½¦ğŸš—
```
tabs-manager
â”œâ”€â”€ images
â”‚   â”œâ”€â”€ icon-128.png
â”‚   â”œâ”€â”€ icon-16.png
â”‚   â”œâ”€â”€ icon-32.png
â”‚   â””â”€â”€ icon-48.png
â”œâ”€â”€ manifest.json
â”œâ”€â”€ popup.css
â”œâ”€â”€ popup.html
â””â”€â”€ popup.js
```
### 3ã€ç¼–å†™æˆ‘ä»¬çš„ä»£ç 

ä¾æ¬¡å¾€æˆ‘ä»¬çš„æ–‡ä»¶ä¸­å¡«å……å†…å®¹ï¼Œé¦–å…ˆæ˜¯`manifest.json`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

`host_permissions`å±æ€§å…è®¸æˆ‘ä»¬åœ¨ç‰¹å®šåŸŸåä¸‹ï¼Œé€šè¿‡jsè®¿é—®è¯¥åŸŸåçš„æ ‡é¢˜ï¼ŒURLåœ°å€ç­‰å±æ€§ï¼Œæˆ‘ä»¬è¿™é‡Œæš‚æ—¶å¯¹ç™¾åº¦å’ŒçŸ¥ä¹çš„ç½‘é¡µè¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œå…ˆå¡«ç™¾åº¦å’ŒçŸ¥ä¹çš„åŸŸåï¼›

`permissions`å±æ€§å¡«å†™tabGroupsï¼Œå…è®¸æˆ‘ä»¬åœ¨jsä¸­ä½¿ç”¨chrome.tabGroupsç›¸å…³APIèƒ½åŠ›

```json
{
  "manifest_version": 3,
  "name": "Tab Manager for Chrome Dev Docs",
  "version": "1.0",
  "icons": {
    "16": "images/icon-16.png",
    "32": "images/icon-32.png",
    "48": "images/icon-48.png",
    "128": "images/icon-128.png"
  },
  "action": {
    "default_popup": "popup.html"
  },
  "host_permissions": [
    "https://zhihu.com/*",
    "https://www.zhihu.com/*",
    "https://baidu.com/*",
    "https://www.baidu.com/*"
  ],
  "permissions": [
    "tabGroups"
  ]
}
```

`å…¶æ¬¡æ˜¯popup.html`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

bodyä¸­çš„`template`ï¼Œtemplateä¸ä¼šè¢«å±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªtemplateæ–¹ä¾¿ç”¨jså»æ¸²æŸ“ï¼›å¦å¤–å¼•å…¥æˆ‘ä»¬çš„`popup.js`

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./popup.css" />
</head>

<body>
  <template id="li_template">
    <li>
      <a>
        <h3 class="title">Tab Title</h3>
        <p class="pathname">Tab Pathname</p>
      </a>
    </li>
  </template>

  <h1>Tabsæ ‡ç­¾é¡µç®¡ç†</h1>
  <button>Group Tabs</button>
  <ul></ul>

  <script src="./popup.js" type="module"></script>
</body>

</html>
```

`æ¥ç€æ˜¯popup.css`ï¼Œå†…å®¹å¦‚ä¸‹ï¼šå®šä¹‰æˆ‘ä»¬å¼¹çª—çš„æ ·å¼

```css
body {
  width: 20rem;
}

ul {
  list-style-type: none;
  padding-inline-start: 0;
  margin: 1rem 0;
}

li {
  padding: 0.25rem;
}
li:nth-child(odd) {
  background: #80808030;
}
li:nth-child(even) {
  background: #ffffff;
}

h3,
p {
  margin: 0;
}
```

`æ¥ç€æ˜¯popup.js`ï¼Œå†…å®¹å¦‚ä¸‹ï¼šåœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸»è¦åšäº†ä¸‹é¢å‡ ä»¶äº‹

- è·å–çŸ¥ä¹ç›¸å…³tabsé›†åˆ
- è·å–ç™¾åº¦ç›¸å…³tabsé›†åˆ
- è®²çŸ¥ä¹ç™¾åº¦çš„tabsç”Ÿæˆä¸€ä¸ªä¸ªæ ‡ç­¾ï¼Œæ˜¾ç¤ºåœ¨æˆ‘ä»¬çš„popup.htmlå½“ä¸­
- é€šè¿‡`collapsed`å°†ç™¾åº¦ã€çŸ¥ä¹çš„æ ‡ç­¾é¡µéƒ½æ”¾åœ¨ä¸€ä¸ªgroupä¸­ï¼ŒæŠ˜å å±•å¼€
- ç‚¹å‡»popup.htmlä¸­æ¯ä¸€ä¸ªæ ‡ç­¾å¯ä»¥è·³è½¬åˆ°å¯¹åº”tab

```js
const zhihuTabs = await chrome.tabs.query({
  url: [
    "https://zhihu.com/*",
    "https://www.zhihu.com/*"
  ]
})

const baiduTabs = await chrome.tabs.query({
  url: [
    "https://baidu.com/*",
    "https://www.baidu.com/*"
  ]
})

const template = document.getElementById("li_template");
const elements = new Set();

for (const tab of zhihuTabs.concat(baiduTabs)) {
  const element = template.content.firstElementChild.cloneNode(true);

  const title = tab.title
  const pathname = tab.url

  element.querySelector(".title").textContent = title;
  element.querySelector(".pathname").textContent = pathname;
  element.querySelector("a").addEventListener("click", async () => {
    // ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç„¶ååˆ‡æ¢æˆå½“å‰tab
    await chrome.tabs.update(tab.id, { active: true });
    await chrome.windows.update(tab.windowId, { focused: true });
  });

  elements.add(element);
}

// æ·»åŠ åˆ°æˆ‘ä»¬çš„popup.htmlä¸­
document.querySelector("ul").append(...elements);

let collapsed = false

const button = document.querySelector("button");
const toGroup = async (tabIds, title) => {
  if (tabIds && tabIds.length) {
    const group = await chrome.tabs.group({ tabIds })
    await await chrome.tabGroups.update(group, { title: title || "Groups", collapsed });
  }
}
button.addEventListener("click", async () => {
  // ç‚¹å‡»groups tabsæŒ‰é’®çš„æ—¶å€™ï¼Œè¿›è¡ŒæŠ˜å /å±•å¼€ï¼Œå¹¶è®¾ç½®ç¾¤ç»„åç§°
  const zhihuTabIds = zhihuTabs.map(({ id }) => id);
  await toGroup(zhihuTabIds, "Zhihu")

  const baiduTabIds = baiduTabs.map(({ id }) => id);
  await toGroup(baiduTabIds, "Baidu")

  collapsed = !collapsed
});
```

### 4ã€å®‰è£…è¿è¡Œ

åœ¨æµè§ˆå™¨ä¸­ç›´æ¥```chrome://extensions```å›è½¦è¿›å…¥æ‰©å±•ç¨‹åºé¢æ¿ï¼Œç„¶ååŠ è½½æˆ‘ä»¬çš„æ–‡ä»¶ç›®å½•ï¼Œé€‰ä¸­æ–‡ä»¶å¤¹å³å¯ï¼Œå†ç‚¹ç¡®è®¤å°±å¯ä»¥äº†ï¼›

å®‰è£…å®Œæˆåï¼Œå°†æ’ä»¶ç½®é¡¶ï¼Œç„¶åç‚¹å‡»æŸ¥çœ‹æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å¿«æ·é”®å¿«é€Ÿæ‰“å¼€ã€‚

æ‰“å¼€ä¸‹é¢çš„æµ‹è¯•åœ°å€ï¼Œ`ç„¶åä½¿ç”¨æˆ‘ä»¬çš„æ’ä»¶è¿›è¡Œgroupåˆ†ç»„`

- [çŸ¥ä¹1](https://www.zhihu.com/question/282691712/answer/2731599501)
- [çŸ¥ä¹2](https://www.zhihu.com/question/356434052/answer/938192426)
- [çŸ¥ä¹3](https://www.zhihu.com/question/waiting)
- [ç™¾åº¦1](https://www.baidu.com/s?ie=UTF-8&wd=baidu)
- [ç™¾åº¦2](https://www.baidu.com/s?rsv_idx=1&wd=%E8%BF%99%E4%BA%9B%E8%AF%97%E6%96%87%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B9%9F%E4%B8%80%E7%9B%B4%E8%83%8C%E2%80%9C%E9%94%99%E2%80%9D%E4%BA%86&fenlei=256&usm=2&ie=utf-8&rsv_pq=8756d09f000520e5&oq=test&rsv_t=6814ElFXFkO3uYEGvTWBnbD3koeunz3B%2BLu%2FZ2IGcN8sD7z1opqCDNWLU98&rqid=8756d09f000520e5&rsf=b90200c42559df6b73a942b0c0387d64_1_15_13&rsv_dl=0_right_fyb_pchot_20811&sa=0_right_fyb_pchot_20811)
- [ç™¾åº¦3](https://www.baidu.com/s?rsv_idx=1&wd=%E5%88%9A%E5%87%BA%E7%94%9F%E5%AE%9D%E5%AE%9D%E8%A2%AB%E5%A4%B8%E4%B8%80%E8%84%B8%E6%AD%A3%E6%B0%94%E5%90%8E%E6%8A%AC%E6%89%8B%E6%95%AC%E7%A4%BC&fenlei=256&ie=utf-8&rsv_pq=aa8de7cf00052eb4&oq=%E8%BF%99%E4%BA%9B%E8%AF%97%E6%96%87%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B9%9F%E4%B8%80%E7%9B%B4%E8%83%8C%E2%80%9C%E9%94%99%E2%80%9D%E4%BA%86&rsv_t=ca5fbFmP91WRWXtDOeK1T84j89wdu6fZTfPeE9FsHaZUGKHbgejN9K%2F1J1A&rqid=aa8de7cf00052eb4&rsf=b90200c42559df6b73a942b0c0387d64_1_15_6&rsv_dl=0_right_fyb_pchot_20811&sa=0_right_fyb_pchot_20811)

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75482461a545475d8e7c805e904141bf~tplv-k3u1fbpfcp-watermark.image?)


![QQ20221028-140552-HD.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b34b1df4e73b483dacde9b6d7a8715fe~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ec079398e234a6a91052efbbec2f42d~tplv-k3u1fbpfcp-watermark.image?)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f748a2c3dc9443a080ee541a16822d81~tplv-k3u1fbpfcp-watermark.image?)

### 5ã€æœ€å
ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬è¿™ä¸€èŠ‚çš„å†…å®¹äº†ï¼Œé¦–å…ˆé€šè¿‡å£°æ˜host_permissionsè·å¾—è®¿é—®æŸäº›åŸŸåçš„urlå’Œtitleä¿¡æ¯ï¼Œåœ¨popup.jsä¸­é€šè¿‡è¿‡æ»¤æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„tabæ ‡ç­¾é¡µï¼Œç„¶åæ ¹æ®è§„åˆ™è¿›è¡Œåˆ†ç»„ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†å±•å¼€/æŠ˜å åˆ†ç»„çš„åŠŸèƒ½ï¼›å¸Œæœ›çœ‹åˆ°æœ€åçš„ä½ æœ‰æ‰€æ”¶è·ï½ï¼Œæºç åœ°å€ä¼šæ”¾åœ¨ä¸‹é¢

### ç›¸å…³é“¾æ¥
- [tabs-manageræºç åœ°å€](https://github.com/rictt/chrome-extension/tree/master/tabs-manager)
- [åŸæ–‡åœ°å€](https://developer.chrome.com/docs/extensions/mv3/getstarted/tut-tabs-manager/)
- [tabs API](https://developer.chrome.com/docs/extensions/reference/tabs/)
- [tabGroups API](https://developer.chrome.com/docs/extensions/reference/tabGroups/)