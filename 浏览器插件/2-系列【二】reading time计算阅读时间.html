<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | 狗子的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="记录生活，记录bug!">
    
    <link rel="preload" href="/assets/css/0.styles.2d7509d5.css" as="style"><link rel="preload" href="/assets/js/app.bb8cb600.js" as="script"><link rel="preload" href="/assets/js/11.a3791431.js" as="script"><link rel="preload" href="/assets/js/59.04682dac.js" as="script"><link rel="prefetch" href="/assets/js/1.22b784aa.js"><link rel="prefetch" href="/assets/js/12.6261f5b4.js"><link rel="prefetch" href="/assets/js/13.86a047ff.js"><link rel="prefetch" href="/assets/js/14.7953b57d.js"><link rel="prefetch" href="/assets/js/15.1ecae33c.js"><link rel="prefetch" href="/assets/js/16.c06b96a9.js"><link rel="prefetch" href="/assets/js/17.aea8c476.js"><link rel="prefetch" href="/assets/js/18.2ddb3342.js"><link rel="prefetch" href="/assets/js/19.46105c6c.js"><link rel="prefetch" href="/assets/js/2.7524170b.js"><link rel="prefetch" href="/assets/js/20.21d391f0.js"><link rel="prefetch" href="/assets/js/21.01f8e774.js"><link rel="prefetch" href="/assets/js/22.d82de8e2.js"><link rel="prefetch" href="/assets/js/23.c902bd4c.js"><link rel="prefetch" href="/assets/js/24.cb4ed996.js"><link rel="prefetch" href="/assets/js/25.06f23009.js"><link rel="prefetch" href="/assets/js/26.6a416950.js"><link rel="prefetch" href="/assets/js/27.f239f8b2.js"><link rel="prefetch" href="/assets/js/28.e6595db8.js"><link rel="prefetch" href="/assets/js/29.2499de18.js"><link rel="prefetch" href="/assets/js/3.c13987f3.js"><link rel="prefetch" href="/assets/js/30.ec2771a3.js"><link rel="prefetch" href="/assets/js/31.cab925d7.js"><link rel="prefetch" href="/assets/js/32.aaba9d6b.js"><link rel="prefetch" href="/assets/js/33.4dede3ae.js"><link rel="prefetch" href="/assets/js/34.e108cd73.js"><link rel="prefetch" href="/assets/js/35.31dd9db1.js"><link rel="prefetch" href="/assets/js/36.35a96604.js"><link rel="prefetch" href="/assets/js/37.ccd32209.js"><link rel="prefetch" href="/assets/js/38.767cc5f3.js"><link rel="prefetch" href="/assets/js/39.7ed8889b.js"><link rel="prefetch" href="/assets/js/4.7abd0e8e.js"><link rel="prefetch" href="/assets/js/40.d35c39ec.js"><link rel="prefetch" href="/assets/js/41.844b41da.js"><link rel="prefetch" href="/assets/js/42.f0c77d2b.js"><link rel="prefetch" href="/assets/js/43.fafef18f.js"><link rel="prefetch" href="/assets/js/44.3821eb8f.js"><link rel="prefetch" href="/assets/js/45.0585464f.js"><link rel="prefetch" href="/assets/js/46.1f77f027.js"><link rel="prefetch" href="/assets/js/47.f47808a4.js"><link rel="prefetch" href="/assets/js/48.dbaed69f.js"><link rel="prefetch" href="/assets/js/49.0859a6e0.js"><link rel="prefetch" href="/assets/js/5.dc5a5f90.js"><link rel="prefetch" href="/assets/js/50.cb3a8f5b.js"><link rel="prefetch" href="/assets/js/51.0b6551a0.js"><link rel="prefetch" href="/assets/js/52.ad422568.js"><link rel="prefetch" href="/assets/js/53.92cb68e0.js"><link rel="prefetch" href="/assets/js/54.f83681f3.js"><link rel="prefetch" href="/assets/js/55.0267d285.js"><link rel="prefetch" href="/assets/js/56.a82dbeec.js"><link rel="prefetch" href="/assets/js/57.ba4f8ea5.js"><link rel="prefetch" href="/assets/js/58.384dc386.js"><link rel="prefetch" href="/assets/js/6.e5a57202.js"><link rel="prefetch" href="/assets/js/60.4f7c43ab.js"><link rel="prefetch" href="/assets/js/61.85cfacbf.js"><link rel="prefetch" href="/assets/js/62.cddefb27.js"><link rel="prefetch" href="/assets/js/63.867189ef.js"><link rel="prefetch" href="/assets/js/64.ab1ec420.js"><link rel="prefetch" href="/assets/js/65.35c96559.js"><link rel="prefetch" href="/assets/js/66.b256f951.js"><link rel="prefetch" href="/assets/js/67.ddb92cad.js"><link rel="prefetch" href="/assets/js/68.0860b2f0.js"><link rel="prefetch" href="/assets/js/69.58b713c5.js"><link rel="prefetch" href="/assets/js/7.d65eb7e3.js"><link rel="prefetch" href="/assets/js/70.001ed193.js"><link rel="prefetch" href="/assets/js/71.632935b7.js"><link rel="prefetch" href="/assets/js/72.ed6347bf.js"><link rel="prefetch" href="/assets/js/73.1ef8eae4.js"><link rel="prefetch" href="/assets/js/74.334f3694.js"><link rel="prefetch" href="/assets/js/75.b9dd2ad8.js"><link rel="prefetch" href="/assets/js/76.8bef6b4f.js"><link rel="prefetch" href="/assets/js/8.44a6ebd7.js"><link rel="prefetch" href="/assets/js/9.391e332d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2d7509d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="狗子的博客" class="logo"> <span class="site-name can-hide">狗子的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/canvas/" class="sidebar-heading clickable"><span>canvas</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/css/" class="sidebar-link">css</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/javascript/" class="sidebar-heading clickable"><span>javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/react/" class="sidebar-heading clickable"><span>react</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/resume/" class="sidebar-link">resume</a></li><li><a href="/vue/" class="sidebar-link">vue</a></li><li><a href="/webpack/" class="sidebar-link">webpack</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/代码检查和风格/" class="sidebar-heading clickable"><span>代码检查和风格</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/包管理器/" class="sidebar-heading clickable"><span>包管理器</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/存档/" class="sidebar-heading clickable"><span>存档</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/打包工具/" class="sidebar-heading clickable"><span>打包工具</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/浏览器插件/" class="sidebar-heading clickable open"><span>浏览器插件</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/浏览器插件/1-系列【一】helloextension.html" class="sidebar-link">系列【一】helloextension</a></li><li><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html" class="active sidebar-link">系列【二】readingtime计算阅读时间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_1、插件开发经常用到的文件" class="sidebar-link">1、插件开发经常用到的文件</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_2、reading-time开发" class="sidebar-link">2、reading time开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_2-1、这一节会介绍的概念" class="sidebar-link">2.1、这一节会介绍的概念</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_2-2编写代码" class="sidebar-link">2.2编写代码</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_2-3程序主逻辑content-js" class="sidebar-link">2.3程序主逻辑content.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_3、安装运行" class="sidebar-link">3、安装运行</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_4、运行效果" class="sidebar-link">4、运行效果</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#_5、总结" class="sidebar-link">5、总结</a></li><li class="sidebar-sub-header"><a href="/浏览器插件/2-系列【二】reading time计算阅读时间.html#相关链接" class="sidebar-link">相关链接</a></li></ul></li><li><a href="/浏览器插件/3-系列【三】focus mode专注模式.html" class="sidebar-link">系列【三】focusmode专注模式</a></li><li><a href="/浏览器插件/4-系列【四】调试我们开发的插件.html" class="sidebar-link">系列【四】调试我们开发的插件</a></li><li><a href="/浏览器插件/5-系列【五】tabs标签管理.html" class="sidebar-link">系列【五】tabs标签管理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>文章内容来源于Chrome开发者文档，大部分为翻译，加上自己的一点补充或者理解，不足之处请担待，系列将通过每个实战例子，来加深对插件开发的理解上手；</p> <p>目录导航</p> <ul><li><a href="https://juejin.cn/post/7159443319938875428" target="_blank" rel="noopener noreferrer">chrome浏览器开发系列(一)：hello extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7159443757878755364" target="_blank" rel="noopener noreferrer">chrome浏览器开发系列(二)：reading time计算阅读时间<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7159443901193928711" target="_blank" rel="noopener noreferrer">chrome浏览器开发系列(三)：focus mode专注模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7159444710384205832" target="_blank" rel="noopener noreferrer">chrome浏览器开发系列(四)：调试我们开发的插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7159445226707222558" target="_blank" rel="noopener noreferrer">chrome浏览器开发系列(五)：tabs标签管理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_1、插件开发经常用到的文件"><a href="#_1、插件开发经常用到的文件" class="header-anchor">#</a> 1、插件开发经常用到的文件</h2> <p>上一节我们认识了<code>manifest.json, popup.html，</code>这一节我们再新认识两个小伙伴，顺便回顾下</p> <ul><li><p>manifest.json</p> <p>我习惯性叫<code>清单配置文件</code>,是每个插件必备的一个文件，通常在项目的根目录下。在文件里面通常声明插件的名称，描述，icon图标，还有插件需要用到的权限等等，<code>总之很重要</code></p></li> <li><p>service worker: <code>background.js</code></p></li></ul> <p>运行在插件背后的脚本，所以也习惯性命名为<code>background.js</code>，脚本会在插件打开时运行在后台，监听浏览器的各种事件，比如tab切换事件，关闭tab等等；通常我们在这里监听特定的事件，然后去干某些特定的事情，比如<code>监听到了访问知乎，把知乎的logo去掉</code></p> <ul><li><code>content.js</code></li></ul> <p>注入到web页面的脚本，因为我们的插件可能涉及对dom的修改，就需要在页面上注入新的脚本，然后修改指定的dom等等，常见的去广告插件就是找到广告块dom的id，然后屏蔽掉；</p> <ul><li>popup.html</li></ul> <p>插件弹窗的内容，还有options.html，听名字就知道是选项的页面，后面我们再讲</p> <h2 id="_2、reading-time开发"><a href="#_2、reading-time开发" class="header-anchor">#</a> 2、reading time开发</h2> <h3 id="_2-1、这一节会介绍的概念"><a href="#_2-1、这一节会介绍的概念" class="header-anchor">#</a> 2.1、这一节会介绍的概念</h3> <ul><li>icon size的使用</li> <li>注入我们的js到页面中</li> <li>使用正则匹配</li> <li>声明权限</li></ul> <h3 id="_2-2编写代码"><a href="#_2-2编写代码" class="header-anchor">#</a> 2.2编写代码</h3> <p>创建文件夹<code>reading-time</code>,在文件夹里面创建<code>manifest.json</code>，其中必填的是<code>manifset_version, name, version</code>；下载图片然后<code>保存在images文件当中</code></p> <p><a href="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/400c982c89bd432a90a7cb55543009ed~tplv-k3u1fbpfcp-watermark.image?" target="_blank" rel="noopener noreferrer">点击下载icon-16.png<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/374b92d90e3f44ec8729b8e1845ffde8~tplv-k3u1fbpfcp-watermark.image?" target="_blank" rel="noopener noreferrer">点击下载icon-32.png<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/478a817d29114a6dae4b4487898420a7~tplv-k3u1fbpfcp-watermark.image?" target="_blank" rel="noopener noreferrer">点击下载icon-48.png<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9faf54ad3328406f835417c794743c7c~tplv-k3u1fbpfcp-watermark.image?" target="_blank" rel="noopener noreferrer">点击下载icon-128.png<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;manifest_version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Reading time&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Add the reading time to Chrome Extension documentation articles&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;icons&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;16&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/icon-16.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;32&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/icon-32.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;48&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/icon-48.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;128&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/icon-128.png&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content_scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;js&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;scripts/content.js&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;matches&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;https://www.zhihu.com/question/*/answer/*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://zhihu.com/question/*/answer/*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://www.zhihu.com/question/*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://zhihu.com/question/*&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>icon的尺寸说明，插件的icon官方建议使用<code>.png</code>的图片，也可以用<code>.svg</code>也是支持的</p> <table><thead><tr><th>icon尺寸</th> <th>说明</th></tr></thead> <tbody><tr><td>16*16</td> <td>扩展页面和上下文菜单图标上的Favicon。</td></tr> <tr><td>32*32</td> <td>Windows计算机通常需要此尺寸。</td></tr> <tr><td>48*48</td> <td>扩展页面上显示</td></tr> <tr><td>128*128</td> <td>在安装和Chrome网络商店中显示。</td></tr></tbody></table> <p><code>content_scripts</code>中的<code>matches</code>是指浏览器页面当匹配到指定的地址时，<code>才注入我们的脚本scripts/content.js</code>，matches的格式是<code>&lt;scheme&gt;://&lt;host&gt;&lt;path&gt;</code>，可以包含*来匹配指定地址下的所有地址，比如<code>https://zhihu.com/question/*/answer/*</code>，则可以匹配到<code>https://zhihu.com/question/1234/answer/456</code></p> <p>到此为止，我们的项目基本工作搭建完成，目录应该是下面这个样子</p> <div class="language-md extra-class"><pre class="language-md"><code>├── images
│   ├── icon-128.png
│   ├── icon-16.png
│   ├── icon-32.png
│   └── icon-48.png
├── manifest.json
└── scripts
    └── content.js
</code></pre></div><h3 id="_2-3程序主逻辑content-js"><a href="#_2-3程序主逻辑content-js" class="header-anchor">#</a> 2.3程序主逻辑content.js</h3> <p>这里我们使用知乎作为测试，计算出每篇文章大约需要花费多少时间，下面是代码和实际效果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> answers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.RichContent-inner'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>answers <span class="token operator">&amp;&amp;</span> answers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  answers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">answer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取回答的内容长度</span>
    <span class="token keyword">const</span> textLength <span class="token operator">=</span> answer<span class="token punctuation">.</span>innerText<span class="token punctuation">.</span>length
    <span class="token comment">// 200个字大约1分钟</span>
    <span class="token keyword">const</span> readingTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>textLength <span class="token operator">/</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">1</span>
    <span class="token keyword">const</span> badge <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
    <span class="token comment">// badge.classList.add(&quot;color-secondary-text&quot;, &quot;type--caption&quot;);</span>
    badge<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'#3c4043'</span>
    badge<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⏱️ 大约需</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>readingTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分钟读完</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">// 插入到回答前面显示</span>
    answer<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>badge<span class="token punctuation">,</span> answer<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3、安装运行"><a href="#_3、安装运行" class="header-anchor">#</a> 3、安装运行</h2> <p>在浏览器中直接<code>chrome://extensions</code>回车进入扩展程序面板，然后加载我们的文件目录，选中文件夹即可，再点确认就可以了；</p> <p>安装完成后，将插件置顶，然后点击查看效果，也可以使用我们自定义的快捷键快速打开。</p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75482461a545475d8e7c805e904141bf~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <p>尝试访问知乎：https://www.zhihu.com/question/516703724</p> <h2 id="_4、运行效果"><a href="#_4、运行效果" class="header-anchor">#</a> 4、运行效果</h2> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3934dd41b55f4092ad1d2f34d1394667~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h2 id="_5、总结"><a href="#_5、总结" class="header-anchor">#</a> 5、总结</h2> <p>本节内容是浏览器插件的进一步了解，主要认识了content.js，和在指定域名下注入我们的脚本，实现插件的功能；再来回顾一下<code>manifest.json, content.js</code></p> <h2 id="相关链接"><a href="#相关链接" class="header-anchor">#</a> 相关链接</h2> <ul><li><a href="https://github.com/rictt/chrome-extension/tree/master/reading-time" target="_blank" rel="noopener noreferrer">源码地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.chrome.com/docs/extensions/mv3/getstarted/tut-reading-time/" target="_blank" rel="noopener noreferrer">原文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.chrome.com/docs/extensions/" target="_blank" rel="noopener noreferrer">插件文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.chrome.com/docs/extensions/mv3/overview/" target="_blank" rel="noopener noreferrer">插件概念<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/浏览器插件/1-系列【一】helloextension.html" class="prev">
        系列【一】helloextension
      </a></span> <span class="next"><a href="/浏览器插件/3-系列【三】focus mode专注模式.html">
        系列【三】focusmode专注模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bb8cb600.js" defer></script><script src="/assets/js/11.a3791431.js" defer></script><script src="/assets/js/59.04682dac.js" defer></script>
  </body>
</html>
